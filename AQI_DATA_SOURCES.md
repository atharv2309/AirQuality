# AQI Data Sources & Integration Guide

## Current Implementation (Demo Mode)

### ğŸ¤– **Current Data Source**
- **Synthetic/Mock Data**: The application currently uses **simulated AQI data** generated by a persistence baseline model
- **Algorithm**: Location-based seeded random data with realistic daily patterns
- **Features**: 
  - Rush hour peaks (7-9 AM, 5-7 PM)
  - Nighttime lows (10 PM - 5 AM)
  - Geographic variation based on coordinates
  - Uncertainty bands (Â±15-25 AQI points)

### âš ï¸ **Limitations**
- Data is **NOT real-time**
- No actual sensor measurements
- No real atmospheric conditions
- For demonstration purposes only

---

## ğŸŒ **Recommended Real Data Sources**

### 1. **OpenAQ (Free & Open Source) â­ RECOMMENDED**
```
API: https://api.openaq.org/v2/
Coverage: Global, 10,000+ stations
Data: PM2.5, PM10, NO2, SO2, O3, CO
Frequency: Real-time to hourly
Cost: FREE
```
**Advantages:**
- Completely free
- Global coverage
- Standardized data format
- Ground-based sensor networks
- Historical data available

### 2. **EPA AirNow (US Only)**
```
API: https://www.airnow.gov/index.cfm?action=aqibasics.aqi
Coverage: United States
Data: AQI, PM2.5, Ozone
Frequency: Hourly
Cost: FREE for non-commercial
```

### 3. **PurpleAir (Community Sensors)**
```
API: https://api.purpleair.com/
Coverage: Global (crowd-sourced)
Data: PM1.0, PM2.5, PM10
Frequency: Real-time (2-minute intervals)
Cost: FREE tier available
```

### 4. **World Air Quality Index (WAQI)**
```
API: https://aqicn.org/api/
Coverage: Global, 1000+ cities
Data: PM2.5, PM10, O3, NO2, SO2, CO
Frequency: Real-time
Cost: FREE tier (1000 requests/month)
```

### 5. **NASA TEMPO (Satellite Data) ğŸ›°ï¸**
```
Source: Tropospheric Emissions Monitoring of Pollution
Coverage: North America (hourly)
Data: NO2, O3, HCHO, SO2
Resolution: 2.1 km Ã— 4.4 km
Access: Through NASA Giovanni or direct API
```

---

## ğŸ”§ **Implementation Recommendations**

### **Phase 1: OpenAQ Integration (Immediate)**
```python
# Example API integration for main.py
import httpx

async def get_real_aqi(lat: float, lon: float):
    async with httpx.AsyncClient() as client:
        # Get nearest stations
        response = await client.get(
            f"https://api.openaq.org/v2/locations",
            params={
                "coordinates": f"{lat},{lon}",
                "radius": 25000,  # 25km radius
                "limit": 5,
                "order_by": "distance"
            }
        )
        
        locations = response.json()["results"]
        
        # Get latest measurements
        if locations:
            location_id = locations[0]["id"]
            measurements_response = await client.get(
                f"https://api.openaq.org/v2/latest",
                params={"location_id": location_id}
            )
            
            return process_openaq_data(measurements_response.json())
        
        return None
```

### **Phase 2: Multi-Source Aggregation**
- Combine OpenAQ + PurpleAir for better coverage
- Use NASA TEMPO for satellite validation
- Implement data quality scoring
- Add real-time alerts

### **Phase 3: Advanced Features**
- Machine learning forecasting using historical data
- TEMPO satellite integration for pollutant source identification
- Real-time air quality alerts
- Integration with weather data for better predictions

---

## ğŸ—ºï¸ **Data Coverage Comparison**

| Source | Global Coverage | Real-time | Ground Sensors | Satellite | Cost |
|--------|----------------|-----------|----------------|-----------|------|
| OpenAQ | âœ… Excellent | âœ… Yes | âœ… Yes | âŒ No | ğŸ†“ Free |
| EPA AirNow | âŒ US Only | âœ… Yes | âœ… Yes | âŒ No | ğŸ†“ Free |
| PurpleAir | âœ… Good | âœ… Yes | âœ… Yes | âŒ No | ğŸ†“ Free tier |
| WAQI | âœ… Good | âœ… Yes | âœ… Yes | âŒ No | ğŸ†“ Free tier |
| NASA TEMPO | âŒ North America | âœ… Hourly | âŒ No | âœ… Yes | ğŸ†“ Free |

---

## ğŸš€ **Quick Implementation Guide**

### 1. **Replace Mock Data with OpenAQ**
```bash
# Install additional dependencies
pip install httpx geopy

# Update main.py forecast endpoint
# Add OpenAQ integration functions
# Implement fallback to mock data if API fails
```

### 2. **Add Data Quality Indicators**
- Sensor age and calibration status
- Data freshness indicators
- Multiple source comparison
- Uncertainty quantification

### 3. **Enhanced Health Recommendations**
- Real-time pollutant-specific advice
- Local air quality trends
- Personalized recommendations based on health conditions
- Integration with local weather conditions

---

## ğŸ“Š **Current vs. Real Data Comparison**

### **Current (Mock) Data:**
```json
{
  "aqi": 65,
  "pm25": 15.5,
  "category": "Moderate",
  "source": "demo_data"
}
```

### **OpenAQ Real Data:**
```json
{
  "aqi": 72,
  "pm25": 18.2,
  "pm10": 35.1,
  "o3": 45.3,
  "no2": 28.7,
  "category": "Moderate",
  "source": "openaq",
  "station": "Mumbai Central",
  "last_updated": "2024-01-15T10:30:00Z",
  "data_quality": "good"
}
```

---

## ğŸ¯ **Next Steps**

1. **Immediate**: Integrate OpenAQ API for real ground-based measurements
2. **Short-term**: Add multiple data source validation
3. **Medium-term**: Implement NASA TEMPO satellite data integration
4. **Long-term**: Machine learning forecasting models

This will transform your demo into a production-ready air quality monitoring system with real, actionable data! ğŸŒâœ¨